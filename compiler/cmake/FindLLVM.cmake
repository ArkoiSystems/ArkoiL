macro(LLVM_FIND_AND_ADD_LIB _libname_)
    string(TOUPPER ${_libname_} _prettyLibname_)
    find_library(LLVM_${_prettyLibname_}_LIB
            NAME
            ${_libname_}
            PATHS
            /usr/lib/llvm/10/lib
            /usr/lib/llvm-10/lib
            /usr/lib/llvm-10.0/lib)
    if (LLVM_${_prettyLibname_}_LIB)
        set(LLVM_LIBRARIES ${LLVM_LIBRARIES} ${LLVM_${_prettyLibname_}_LIB})
    endif ()
endmacro()

find_path(LLVM_INCLUDE_DIRS
        NAME
        llvm/IR/IRBuilder.h
        PATHS
        /usr/lib/llvm/10/include
        /usr/lib/llvm-10/include
        /usr/lib/llvm-10.0/include)

find_library(LLVM_LIBRARY
        NAMES
        LLVM-10.0
        LLVM-10
        PATHS
        /usr/lib/llvm/10/lib
        /usr/lib/llvm/10/lib64
        /usr/lib/llvm-10/lib)

if (LLVM_LIBRARY)
    set(LLVM_LIBRARIES ${LLVM_LIBRARY})
else ()
    LLVM_FIND_AND_ADD_LIB(LLVMXRay)
    LLVM_FIND_AND_ADD_LIB(LLVMWindowsManifest)
    LLVM_FIND_AND_ADD_LIB(LLVMSymbolize)
    LLVM_FIND_AND_ADD_LIB(LLVMDebugInfoPDB)
    LLVM_FIND_AND_ADD_LIB(LLVMOrcJIT)
    LLVM_FIND_AND_ADD_LIB(LLVMOrcError)
    LLVM_FIND_AND_ADD_LIB(LLVMJITLink)
    LLVM_FIND_AND_ADD_LIB(LLVMObjectYAML)
    LLVM_FIND_AND_ADD_LIB(LLVMMCA)
    LLVM_FIND_AND_ADD_LIB(LLVMLTO)
    LLVM_FIND_AND_ADD_LIB(LLVMPasses)
    LLVM_FIND_AND_ADD_LIB(LLVMObjCARCOpts)
    LLVM_FIND_AND_ADD_LIB(LLVMLineEditor)
    LLVM_FIND_AND_ADD_LIB(LLVMLibDriver)
    LLVM_FIND_AND_ADD_LIB(LLVMInterpreter)
    LLVM_FIND_AND_ADD_LIB(LLVMFuzzMutate)
    LLVM_FIND_AND_ADD_LIB(LLVMFrontendOpenMP)
    LLVM_FIND_AND_ADD_LIB(LLVMMCJIT)
    LLVM_FIND_AND_ADD_LIB(LLVMExecutionEngine)
    LLVM_FIND_AND_ADD_LIB(LLVMRuntimeDyld)
    LLVM_FIND_AND_ADD_LIB(LLVMDWARFLinker)
    LLVM_FIND_AND_ADD_LIB(LLVMDlltoolDriver)
    LLVM_FIND_AND_ADD_LIB(LLVMOption)
    LLVM_FIND_AND_ADD_LIB(LLVMDebugInfoGSYM)
    LLVM_FIND_AND_ADD_LIB(LLVMCoverage)
    LLVM_FIND_AND_ADD_LIB(LLVMCoroutines)
    LLVM_FIND_AND_ADD_LIB(LLVMAVRDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMAVRCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMAVRAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMAVRDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMAVRInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMXCoreDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMXCoreCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMXCoreDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMXCoreInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMX86Disassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMX86AsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMX86CodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMX86Desc)
    LLVM_FIND_AND_ADD_LIB(LLVMX86Utils)
    LLVM_FIND_AND_ADD_LIB(LLVMX86Info)
    LLVM_FIND_AND_ADD_LIB(LLVMWebAssemblyDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMWebAssemblyCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMWebAssemblyDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMWebAssemblyAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMWebAssemblyInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMSystemZDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMSystemZCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMSystemZAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMSystemZDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMSystemZInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMSparcDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMSparcCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMSparcAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMSparcDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMSparcInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMRISCVDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMRISCVCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMRISCVAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMRISCVDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMRISCVUtils)
    LLVM_FIND_AND_ADD_LIB(LLVMRISCVInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMPowerPCDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMPowerPCCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMPowerPCAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMPowerPCDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMPowerPCInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMNVPTXCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMNVPTXDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMNVPTXInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMMSP430Disassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMMSP430CodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMMSP430AsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMMSP430Desc)
    LLVM_FIND_AND_ADD_LIB(LLVMMSP430Info)
    LLVM_FIND_AND_ADD_LIB(LLVMMipsDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMMipsCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMMipsAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMMipsDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMMipsInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMLanaiDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMLanaiCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMLanaiAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMLanaiDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMLanaiInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMHexagonDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMHexagonCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMHexagonAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMHexagonDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMHexagonInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMBPFDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMBPFCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMBPFAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMBPFDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMBPFInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMARMDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMARMCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMARMAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMARMDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMARMUtils)
    LLVM_FIND_AND_ADD_LIB(LLVMARMInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMAMDGPUDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMAMDGPUCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMMIRParser)
    LLVM_FIND_AND_ADD_LIB(LLVMipo)
    LLVM_FIND_AND_ADD_LIB(LLVMInstrumentation)
    LLVM_FIND_AND_ADD_LIB(LLVMVectorize)
    LLVM_FIND_AND_ADD_LIB(LLVMLinker)
    LLVM_FIND_AND_ADD_LIB(LLVMIRReader)
    LLVM_FIND_AND_ADD_LIB(LLVMAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMAMDGPUAsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMAMDGPUDesc)
    LLVM_FIND_AND_ADD_LIB(LLVMAMDGPUUtils)
    LLVM_FIND_AND_ADD_LIB(LLVMAMDGPUInfo)
    LLVM_FIND_AND_ADD_LIB(LLVMAArch64Disassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMMCDisassembler)
    LLVM_FIND_AND_ADD_LIB(LLVMAArch64CodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMCFGuard)
    LLVM_FIND_AND_ADD_LIB(LLVMGlobalISel)
    LLVM_FIND_AND_ADD_LIB(LLVMSelectionDAG)
    LLVM_FIND_AND_ADD_LIB(LLVMAsmPrinter)
    LLVM_FIND_AND_ADD_LIB(LLVMDebugInfoDWARF)
    LLVM_FIND_AND_ADD_LIB(LLVMCodeGen)
    LLVM_FIND_AND_ADD_LIB(LLVMTarget)
    LLVM_FIND_AND_ADD_LIB(LLVMScalarOpts)
    LLVM_FIND_AND_ADD_LIB(LLVMInstCombine)
    LLVM_FIND_AND_ADD_LIB(LLVMAggressiveInstCombine)
    LLVM_FIND_AND_ADD_LIB(LLVMTransformUtils)
    LLVM_FIND_AND_ADD_LIB(LLVMBitWriter)
    LLVM_FIND_AND_ADD_LIB(LLVMAnalysis)
    LLVM_FIND_AND_ADD_LIB(LLVMProfileData)
    LLVM_FIND_AND_ADD_LIB(LLVMObject)
    LLVM_FIND_AND_ADD_LIB(LLVMTextAPI)
    LLVM_FIND_AND_ADD_LIB(LLVMBitReader)
    LLVM_FIND_AND_ADD_LIB(LLVMCore)
    LLVM_FIND_AND_ADD_LIB(LLVMRemarks)
    LLVM_FIND_AND_ADD_LIB(LLVMBitstreamReader)
    LLVM_FIND_AND_ADD_LIB(LLVMAArch64AsmParser)
    LLVM_FIND_AND_ADD_LIB(LLVMMCParser)
    LLVM_FIND_AND_ADD_LIB(LLVMAArch64Desc)
    LLVM_FIND_AND_ADD_LIB(LLVMMC)
    LLVM_FIND_AND_ADD_LIB(LLVMDebugInfoCodeView)
    LLVM_FIND_AND_ADD_LIB(LLVMDebugInfoMSF)
    LLVM_FIND_AND_ADD_LIB(LLVMBinaryFormat)
    LLVM_FIND_AND_ADD_LIB(LLVMAArch64Utils)
    LLVM_FIND_AND_ADD_LIB(LLVMAArch64Info)
    LLVM_FIND_AND_ADD_LIB(LLVMSupport)
    LLVM_FIND_AND_ADD_LIB(LLVMDemangle)
endif ()

include(FindPackageHandleStandardArgs)
find_package_handle_standard_args(LLVM DEFAULT_MSG LLVM_LIBRARIES LLVM_INCLUDE_DIRS)

mark_as_advanced(LLVM_LIBRARIES LLVM_INCLUDE_DIRS)